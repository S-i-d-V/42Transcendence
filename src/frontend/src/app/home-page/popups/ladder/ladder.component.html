<div class="container">

  <div class="ladder-header">
    <p class="ladder-header-rank">Rank</p>
    <p class="ladder-header-score">Score</p>
    <p class="ladder-header-counter">Wins/Loses</p>
    <p class="ladder-header-username">Username</p>
  </div>

  <div class="ladder-items" *ngIf="isLoaded">
    <div class="ladder-item" *ngFor="let player of ladder.slice(); let indexOfElement = index">

      <div class="ladder-rank">
        <p [ngClass]="colorPodium(indexOfElement + 1)"> {{ indexOfElement + 1 }} </p>
      </div>

      <div class="ladder-score">
        <img src="assets/images/elo.png" alt="">
        <p class="ladder-score-field"> {{ player.score }} </p>
      </div>

      <div class="ladder-win-lose">
        <p class="ladder-wins"> W </p>
        <p> {{ player.nbWins }} / {{ player.nbLoses }} </p>
        <p class="ladder-loses"> L </p>
      </div>

      <div class="ladder-player" (mouseenter)="player.showButtons = true" (mouseleave)="player.showButtons = false">
        <p *ngIf="!player.showButtons || player.username === username" (click)="popupsService.openProfil(player.username)"> {{ player.username }} </p>
        <img *ngIf="!player.showButtons || player.username === username" class="ladder-player-avatar" avatar username="{{ player.username }}" alt="">

         <!-- Profil button -->
         <svg class="ladder-player-button" *ngIf="player.showButtons && player.username != username" (click)="popupsService.openProfil(player.username)" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 16C19.8675 16 23 12.8675 23 9C23 5.1325 19.8675 2 16 2C12.1325 2 9 5.1325 9 9C9 12.8675 12.1325 16 16 16ZM16 19.5C11.3275 19.5 2 21.845 2 26.5C2 28.433 3.567 30 5.5 30H26.5C28.433 30 30 28.433 30 26.5C30 21.845 20.6725 19.5 16 19.5Z"/>
        </svg>

        <!-- Invite / Spectate -->
        <!-- Invite -->
        <svg class="ladder-player-button" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M30.6666 4H1.33331V25.3333H10.6666V28H21.3333V25.3333H24V22.6667H3.99998V6.66667H28V17.3333H30.6666V4ZM17.3333 13.3333V9.33333H14.6666V13.3333H10.6666V16H14.6666V20H17.3333V16H21.3333V13.3333H17.3333ZM32 24L26 30L24 28L28 24L24 20L26 18L32 24Z"/>
        </svg>
        <!-- Spectate -->
        <svg (click)="this.gameComponent.buttonSpectateGame(player.username)" class="ladder-player-button" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path  d="M3.99998 5.33317V21.3332H28V5.33317H3.99998ZM3.99998 2.6665H28C28.7072 2.6665 29.3855 2.94746 29.8856 3.44755C30.3857 3.94765 30.6666 4.62593 30.6666 5.33317V21.3332C30.6666 22.0398 30.3866 22.7198 29.88 23.2132C29.3866 23.7198 28.7066 23.9998 28 23.9998H18.6666V26.6665H21.3333V29.3332H10.6666V26.6665H13.3333V23.9998H3.99998C3.29331 23.9998 2.61331 23.7198 2.11998 23.2132C1.61331 22.7198 1.33331 22.0398 1.33331 21.3332V5.33317C1.33331 3.85317 2.51998 2.6665 3.99998 2.6665ZM14.4533 11.9065C14.8666 11.5065 15.4266 11.2665 16 11.2665C16.5733 11.2798 17.1333 11.5065 17.5466 11.9198C17.9466 12.3198 18.1866 12.8798 18.1866 13.4532C18.1866 14.0398 17.9466 14.5865 17.5466 14.9998C17.1333 15.4132 16.5733 15.6398 16 15.6398C15.4266 15.6398 14.8666 15.3998 14.4533 14.9998C14.0533 14.5865 13.8133 14.0398 13.8133 13.4532C13.8133 12.8798 14.0533 12.3198 14.4533 11.9065ZM13.4266 15.9998C13.7599 16.346 14.1596 16.6214 14.6017 16.8095C15.0439 16.9976 15.5195 17.0945 16 17.0945C16.4805 17.0945 16.9561 16.9976 17.3982 16.8095C17.8404 16.6214 18.2401 16.346 18.5733 15.9998C19.2533 15.3332 19.64 14.4132 19.64 13.4532C19.64 12.4932 19.2533 11.5598 18.5733 10.8798C17.8933 10.1998 16.96 9.81317 16 9.81317C15.04 9.81317 14.1066 10.1998 13.4266 10.8798C12.7466 11.5598 12.36 12.4932 12.36 13.4532C12.36 14.4132 12.7466 15.3332 13.4266 15.9998ZM7.99998 13.4532C8.63181 11.8461 9.73282 10.4664 11.1597 9.49378C12.5865 8.52114 14.2731 8.00057 16 7.99984C19.64 7.99984 22.7466 10.2665 24 13.4532C23.3727 15.0633 22.2728 16.446 20.8449 17.4193C19.417 18.3926 17.728 18.9111 16 18.9065C12.36 18.9065 9.25331 16.6665 7.99998 13.4532Z" fill="white"/>
        </svg>

        <!-- Add / Remove friends-->
        <!-- Add -->
        <svg class="ladder-player-button add" *ngIf="player.showButtons && player.username != username && (socialService.checkUserRelation(username, player.username) === 'none' || socialService.checkUserRelation(username, player.username) === 'blocked')" (click)="socialService.friendUser(player.username)" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.3448 6.51724C14.3448 7.9805 13.7635 9.38384 12.7289 10.4185C11.6942 11.4532 10.2908 12.0345 8.82759 12.0345C7.36432 12.0345 5.96099 11.4532 4.92631 10.4185C3.89162 9.38384 3.31034 7.9805 3.31034 6.51724C3.31034 5.05398 3.89162 3.65065 4.92631 2.61596C5.96099 1.58128 7.36432 1 8.82759 1C10.2908 1 11.6942 1.58128 12.7289 2.61596C13.7635 3.65065 14.3448 5.05398 14.3448 6.51724ZM22.069 9.82759C20.8896 9.8267 19.7165 9.9977 18.5865 10.3352C18.0783 9.68316 17.7635 8.90155 17.6778 8.07936C17.5922 7.25717 17.7391 6.42745 18.1019 5.68469C18.4648 4.94193 19.0289 4.31598 19.73 3.87814C20.4312 3.4403 21.2412 3.20816 22.0679 3.20816C22.8945 3.20816 23.7045 3.4403 24.4057 3.87814C25.1069 4.31598 25.671 4.94193 26.0338 5.68469C26.3966 6.42745 26.5436 7.25717 26.4579 8.07936C26.3722 8.90155 26.0574 9.68316 25.5492 10.3352C24.4199 9.99791 23.2475 9.82692 22.069 9.82759ZM3.31034 14.2414H12.7051C10.908 16.4138 9.92674 19.1461 9.93103 21.9655C9.93103 22.7026 9.99724 23.4221 10.123 24.1217C9.69207 24.156 9.25991 24.1729 8.82759 24.1724C0 24.1724 0 17.7172 0 17.7172V17.5517C0 16.6738 0.348768 15.8318 0.969578 15.211C1.59039 14.5901 2.43239 14.2414 3.31034 14.2414ZM32 21.9655C32 24.5994 30.9537 27.1254 29.0913 28.9878C27.2288 30.8502 24.7028 31.8966 22.069 31.8966C19.4351 31.8966 16.9091 30.8502 15.0467 28.9878C13.1842 27.1254 12.1379 24.5994 12.1379 21.9655C12.1379 19.3316 13.1842 16.8056 15.0467 14.9432C16.9091 13.0808 19.4351 12.0345 22.069 12.0345C24.7028 12.0345 27.2288 13.0808 29.0913 14.9432C30.9537 16.8056 32 19.3316 32 21.9655ZM23.1724 17.5517C23.1724 17.2591 23.0562 16.9784 22.8492 16.7715C22.6423 16.5645 22.3616 16.4483 22.069 16.4483C21.7763 16.4483 21.4956 16.5645 21.2887 16.7715C21.0818 16.9784 20.9655 17.2591 20.9655 17.5517V20.8621H17.6552C17.3625 20.8621 17.0819 20.9783 16.8749 21.1853C16.668 21.3922 16.5517 21.6729 16.5517 21.9655C16.5517 22.2582 16.668 22.5388 16.8749 22.7458C17.0819 22.9527 17.3625 23.069 17.6552 23.069H20.9655V26.3793C20.9655 26.672 21.0818 26.9526 21.2887 27.1596C21.4956 27.3665 21.7763 27.4828 22.069 27.4828C22.3616 27.4828 22.6423 27.3665 22.8492 27.1596C23.0562 26.9526 23.1724 26.672 23.1724 26.3793V23.069H26.4828C26.7754 23.069 27.0561 22.9527 27.263 22.7458C27.47 22.5388 27.5862 22.2582 27.5862 21.9655C27.5862 21.6729 27.47 21.3922 27.263 21.1853C27.0561 20.9783 26.7754 20.8621 26.4828 20.8621H23.1724V17.5517Z"/>
        </svg>
        <!-- Remove -->
        <svg class="ladder-player-button remove" *ngIf="player.showButtons && player.username != username && socialService.checkUserRelation(username, player.username) === 'friend'" (click)="socialService.unfriendUser(player.username)" width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 9C16 10.3261 15.4732 11.5979 14.5355 12.5355C13.5979 13.4732 12.3261 14 11 14C9.67392 14 8.40215 13.4732 7.46447 12.5355C6.52678 11.5979 6 10.3261 6 9C6 7.67392 6.52678 6.40215 7.46447 5.46447C8.40215 4.52678 9.67392 4 11 4C12.3261 4 13.5979 4.52678 14.5355 5.46447C15.4732 6.40215 16 7.67392 16 9V9ZM23 12C21.9312 11.9992 20.8681 12.1542 19.844 12.46C19.3835 11.8691 19.0982 11.1608 19.0205 10.4157C18.9429 9.67056 19.0761 8.91863 19.4049 8.2455C19.7337 7.57237 20.2449 7.00511 20.8803 6.60831C21.5158 6.21152 22.2499 6.00114 22.999 6.00114C23.7481 6.00114 24.4822 6.21152 25.1177 6.60831C25.7531 7.00511 26.2643 7.57237 26.5931 8.2455C26.9219 8.91863 27.0551 9.67056 26.9775 10.4157C26.8998 11.1608 26.6145 11.8691 26.154 12.46C25.1306 12.1544 24.0681 11.9994 23 12V12ZM6 16H14.514C12.8854 17.9688 11.9961 20.4449 12 23C12 23.668 12.06 24.32 12.174 24.954C11.7834 24.9851 11.3918 25.0004 11 25C3 25 3 19.15 3 19.15V19C3 18.2044 3.31607 17.4413 3.87868 16.8787C4.44129 16.3161 5.20435 16 6 16V16ZM14 23C14 25.3869 14.9482 27.6761 16.636 29.364C18.3239 31.0518 20.6131 32 23 32C25.3869 32 27.6761 31.0518 29.364 29.364C31.0518 27.6761 32 25.3869 32 23C32 20.6131 31.0518 18.3239 29.364 16.636C27.6761 14.9482 25.3869 14 23 14C20.6131 14 18.3239 14.9482 16.636 16.636C14.9482 18.3239 14 20.6131 14 23V23ZM16 23C16 21.7009 16.3615 20.4274 17.0441 19.322C17.7267 18.2166 18.7035 17.3231 19.865 16.7412C21.0266 16.1594 22.3272 15.9123 23.6212 16.0276C24.9152 16.1429 26.1516 16.616 27.192 17.394L17.392 27.194C16.4853 25.9841 15.9967 24.512 16 23V23ZM23 30C21.428 30 19.976 29.48 18.808 28.606L28.608 18.806C29.3867 19.8465 29.8603 21.0833 29.9758 22.3778C30.0913 23.6723 29.8442 24.9734 29.262 26.1354C28.6799 27.2974 27.7858 28.2744 26.6798 28.9569C25.5738 29.6395 24.2996 30.0007 23 30V30Z"/>
        </svg>

        <!-- Block -->
        <svg class="ladder-player-button" *ngIf="player.showButtons && player.username != username && (socialService.checkUserRelation(username, player.username) === 'none' || socialService.checkUserRelation(username, player.username) === 'friend')" (click)="socialService.blockUser(player.username)" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.5429 6.94286C15.5429 8.519 14.9167 10.0306 13.8022 11.1451C12.6877 12.2596 11.1761 12.8857 9.6 12.8857C8.02386 12.8857 6.51227 12.2596 5.39777 11.1451C4.28326 10.0306 3.65714 8.519 3.65714 6.94286C3.65714 5.36671 4.28326 3.85512 5.39777 2.74062C6.51227 1.62612 8.02386 1 9.6 1C11.1761 1 12.6877 1.62612 13.8022 2.74062C14.9167 3.85512 15.5429 5.36671 15.5429 6.94286ZM17.3714 22.8496C16.0219 24.3673 13.6777 25.6857 9.6 25.6857C0 25.6857 0 18.3714 0 18.3714C0 17.4015 0.385305 16.4713 1.07115 15.7854C1.757 15.0996 2.68721 14.7143 3.65714 14.7143H15.5429C16.5128 14.7143 17.443 15.0996 18.1288 15.7854C18.8147 16.4713 19.2 17.4015 19.2 18.3714C19.2 18.3714 19.2 18.5634 19.1598 18.8834C18.6144 19.2074 18.1627 19.6678 17.8492 20.2192C17.5356 20.7707 17.371 21.3942 17.3714 22.0286V22.8496ZM23.7714 12.8857C24.9838 12.8857 26.1466 12.4041 27.0039 11.5468C27.8612 10.6895 28.3429 9.5267 28.3429 8.31429C28.3429 7.10187 27.8612 5.93911 27.0039 5.0818C26.1466 4.22449 24.9838 3.74286 23.7714 3.74286C22.559 3.74286 21.3962 4.22449 20.5389 5.0818C19.6816 5.93911 19.2 7.10187 19.2 8.31429C19.2 9.5267 19.6816 10.6895 20.5389 11.5468C21.3962 12.4041 22.559 12.8857 23.7714 12.8857ZM21.9429 18.3714V20.2H21.0286C20.5436 20.2 20.0785 20.3927 19.7356 20.7356C19.3927 21.0785 19.2 21.5436 19.2 22.0286V29.3429C19.2 29.8278 19.3927 30.2929 19.7356 30.6359C20.0785 30.9788 20.5436 31.1714 21.0286 31.1714H30.1714C30.6564 31.1714 31.1215 30.9788 31.4644 30.6359C31.8073 30.2929 32 29.8278 32 29.3429V22.0286C32 21.5436 31.8073 21.0785 31.4644 20.7356C31.1215 20.3927 30.6564 20.2 30.1714 20.2H29.2571V18.3714C29.2571 17.4015 28.8718 16.4713 28.186 15.7854C27.5001 15.0996 26.5699 14.7143 25.6 14.7143C24.6301 14.7143 23.6999 15.0996 23.014 15.7854C22.3282 16.4713 21.9429 17.4015 21.9429 18.3714ZM23.7714 20.2V18.3714C23.7714 17.8865 23.9641 17.4214 24.307 17.0784C24.6499 16.7355 25.115 16.5429 25.6 16.5429C26.085 16.5429 26.5501 16.7355 26.893 17.0784C27.2359 17.4214 27.4286 17.8865 27.4286 18.3714V20.2H23.7714ZM25.6 24.3143C25.9637 24.3143 26.3126 24.4588 26.5697 24.716C26.8269 24.9732 26.9714 25.322 26.9714 25.6857C26.9714 26.0494 26.8269 26.3983 26.5697 26.6555C26.3126 26.9127 25.9637 27.0571 25.6 27.0571C25.2363 27.0571 24.8874 26.9127 24.6303 26.6555C24.3731 26.3983 24.2286 26.0494 24.2286 25.6857C24.2286 25.322 24.3731 24.9732 24.6303 24.716C24.8874 24.4588 25.2363 24.3143 25.6 24.3143Z"/>
        </svg>
      </div>

    </div>
  </div>

</div>
