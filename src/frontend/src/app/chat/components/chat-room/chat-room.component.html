<div class="chatbox" *ngIf="(chatRoom | json) != ({} | json)">
    <!-- Header -->
    <!-- <div class="chatbox-header">
        <span class="chatbox-header-span">
          <h2>{{chatRoom.name}}</h2>
        </span>
        <span *ngFor="let roomUser of (roomUsers)">
            <a class="btn-profile" (click)="openProfile(roomUser.username)">{{roomUser.username}} </a>
        </span>
    </div> -->

    <!-- RoomUsers -->
    <div class="chatbox-roomuser">
      <div class="chatbox-roomuser-items">
        <div class="chatbox-roomuser-item" *ngFor="let roomUser of (roomUsers)">
          <img class="chatbox-roomuser-item-avatar" avatar username="{{ roomUser.username }}">
          <p>{{ roomUser.username }}</p>
        </div>
      </div>
    </div>

    <div class="chatbox-chat">
      <!--Messages-->
      <div class="chatbox-messages" #msgs>
          <div *ngFor="let message of (messages|async)">
              <app-chat-message class="chatbox-messages-app" [message]="message"></app-chat-message>
          </div>
      </div>

      <!-- Input-->
      <div class="chatbox-input" *ngIf="(roomUsers)?.length; else password">
        <!-- Input -->
        <input class="chatbox-input-form" matInput [formControl]="chatMessage" type="text" (keyup.enter)="sendMessage()">
        <!-- Send button -->
        <button class="chatbox-input-button" [disabled]="!chatMessage.valid && chatRoom" (click)="sendMessage()">
          <svg class="chatbox-input-button-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>

      <!-- Password -->
      <ng-template #password>
        <div class="chatbox-password">
          <input class="chatbox-password-input" type="password" [formControl]="pass" (keyup.enter)="joinProtectedRoom()" required>
          <button class="chatbox-password-button " [disabled]="!pass.valid" (click)="joinProtectedRoom()">
            <svg class="chatbox-password-button-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.5 8.25C1.5 7.25544 1.89509 6.30161 2.59835 5.59835C3.30161 4.89509 4.25544 4.5 5.25 4.5H18.75C19.7446 4.5 20.6984 4.89509 21.4017 5.59835C22.1049 6.30161 22.5 7.25544 22.5 8.25V14.25C22.5 14.7425 22.403 15.2301 22.2145 15.6851C22.0261 16.14 21.7499 16.5534 21.4017 16.9017C21.0534 17.2499 20.64 17.5261 20.1851 17.7145C19.7301 17.903 19.2425 18 18.75 18H5.25C4.25544 18 3.30161 17.6049 2.59835 16.9017C1.89509 16.1984 1.5 15.2446 1.5 14.25V8.25ZM7.719 9.219L6.75 10.1895L5.781 9.219C5.71127 9.14927 5.62848 9.09395 5.53738 9.05621C5.44627 9.01848 5.34862 8.99905 5.25 8.99905C5.15138 8.99905 5.05373 9.01848 4.96262 9.05621C4.87152 9.09395 4.78873 9.14927 4.719 9.219C4.64927 9.28873 4.59395 9.37152 4.55622 9.46262C4.51848 9.55373 4.49905 9.65138 4.49905 9.75C4.49905 9.84862 4.51848 9.94627 4.55622 10.0374C4.59395 10.1285 4.64927 10.2113 4.719 10.281L5.6895 11.25L4.719 12.219C4.64927 12.2887 4.59395 12.3715 4.55622 12.4626C4.51848 12.5537 4.49905 12.6514 4.49905 12.75C4.49905 12.8486 4.51848 12.9463 4.55622 13.0374C4.59395 13.1285 4.64927 13.2113 4.719 13.281C4.85983 13.4218 5.05084 13.5009 5.25 13.5009C5.34862 13.5009 5.44627 13.4815 5.53738 13.4438C5.62848 13.406 5.71127 13.3507 5.781 13.281L6.75 12.3105L7.719 13.281C7.78873 13.3507 7.87152 13.406 7.96262 13.4438C8.05373 13.4815 8.15138 13.5009 8.25 13.5009C8.34862 13.5009 8.44627 13.4815 8.53738 13.4438C8.62848 13.406 8.71127 13.3507 8.781 13.281C8.85073 13.2113 8.90605 13.1285 8.94379 13.0374C8.98152 12.9463 9.00095 12.8486 9.00095 12.75C9.00095 12.6514 8.98152 12.5537 8.94379 12.4626C8.90605 12.3715 8.85073 12.2887 8.781 12.219L7.8105 11.25L8.781 10.281C8.85073 10.2113 8.90605 10.1285 8.94379 10.0374C8.98152 9.94627 9.00095 9.84862 9.00095 9.75C9.00095 9.65138 8.98152 9.55373 8.94379 9.46262C8.90605 9.37152 8.85073 9.28873 8.781 9.219C8.71127 9.14927 8.62848 9.09395 8.53738 9.05621C8.44627 9.01848 8.34862 8.99905 8.25 8.99905C8.15138 8.99905 8.05373 9.01848 7.96262 9.05621C7.87152 9.09395 7.78873 9.14927 7.719 9.219V9.219ZM13.719 9.219L12.75 10.1895L11.781 9.219C11.7113 9.14927 11.6285 9.09395 11.5374 9.05621C11.4463 9.01848 11.3486 8.99905 11.25 8.99905C11.1514 8.99905 11.0537 9.01848 10.9626 9.05621C10.8715 9.09395 10.7887 9.14927 10.719 9.219C10.6493 9.28873 10.594 9.37152 10.5562 9.46262C10.5185 9.55373 10.4991 9.65138 10.4991 9.75C10.4991 9.84862 10.5185 9.94627 10.5562 10.0374C10.594 10.1285 10.6493 10.2113 10.719 10.281L11.6895 11.25L10.719 12.219C10.6493 12.2887 10.594 12.3715 10.5562 12.4626C10.5185 12.5537 10.4991 12.6514 10.4991 12.75C10.4991 12.8486 10.5185 12.9463 10.5562 13.0374C10.594 13.1285 10.6493 13.2113 10.719 13.281C10.8598 13.4218 11.0508 13.5009 11.25 13.5009C11.3486 13.5009 11.4463 13.4815 11.5374 13.4438C11.6285 13.406 11.7113 13.3507 11.781 13.281L12.75 12.3105L13.719 13.281C13.8598 13.4218 14.0508 13.5009 14.25 13.5009C14.4492 13.5009 14.6402 13.4218 14.781 13.281C14.9218 13.1402 15.0009 12.9492 15.0009 12.75C15.0009 12.5508 14.9218 12.3598 14.781 12.219L13.8105 11.25L14.781 10.281C14.9218 10.1402 15.0009 9.94916 15.0009 9.75C15.0009 9.55084 14.9218 9.35983 14.781 9.219C14.6402 9.07817 14.4492 8.99905 14.25 8.99905C14.0508 8.99905 13.8598 9.07817 13.719 9.219V9.219ZM16.5 12.75C16.5 12.9489 16.579 13.1397 16.7197 13.2803C16.8603 13.421 17.0511 13.5 17.25 13.5H18.75C18.9489 13.5 19.1397 13.421 19.2803 13.2803C19.421 13.1397 19.5 12.9489 19.5 12.75C19.5 12.5511 19.421 12.3603 19.2803 12.2197C19.1397 12.079 18.9489 12 18.75 12H17.25C17.0511 12 16.8603 12.079 16.7197 12.2197C16.579 12.3603 16.5 12.5511 16.5 12.75Z"/>
            </svg>
          </button>
        </div>
      </ng-template>
    </div>

</div>
